# 옵티마이저와 힌트
옵티마이저는 쿼리를 최적으로 실행하기 위해서 통계 정보를 참조하며, 이러한 데이터를 비교해서 최적의 실행계획을 수립한다. 

MySQL에서는 `EXPLAIN` 이라는 명령어로 쿼리의 실행 계획을 확인할 수 있다. 실행계획에 표시되는 내용을 제대로 이해하기 위해서는 옵티마이저가 쿼리를 어떻게 최적화 하는지 어느정도 지식을 갖추고 있어야 한다. 

__이 장에서는 MySQL 서버가 사용자의 요청을 처리하기 위해서 데이터를 가공하는 기본 절차와 빠른 성능을 보장해 주기 위한 최적화에 대해서 알아본다.__

## 개요
기본적으로 실행 계획을 이해할 수 있어야 실행계획의 불합리한 부분을 찾아내고, __더 최적화된 방법으로 실행 계획을 수립할 수 있도록 유도할 수 있다.__

### 쿼리 실행 절차
실행 과정
1. SQL 문장을 잘게 쪼개서 분리한다. 
2. 분리된 정보를 확인하면서 어떤 테이블로부터 읽고, 어떤 인덱스를 이용할 지 선택한다. 
   - 불필요한 조건 제거 및 복잡한 연산 단순화
   - 여러 조인이 있는 경우 어떤 순서로 테이블을 읽을 지 결정
   - 인덱스 결정
   - 가져온 레코드를 임시 테이블에 넣고 다시 한번 가공해야 하는지 결정
   - __이 단계가 완료되면 쿼리의 실행계획이 만들어진다__
3. 2번에서 결정된 정보를 바탕으로 스토리지 엔진으로부터 데이터를 가져온다. 

### 옵티마이저 종류
1. 비용 기반 최적화(Cost-based optimizer, CBO)
   - 쿼리를 처리하기 위한 여러가지 방법을 만들고, 각 단위 작업의 비용 정보와 통계 정보를 바탕으로 비용을 산출한다. 
   - 대부분의 DB가 사용하는 방식.
2. 규칙 기반 최적화(Rule-based optimizer, RBO)
   - 테이블의 레코드가 선택도 등을 고려하지 않고 옵티마이저에 내장된 우선순위에 따라 실행계획을 수립하는 방식.
   - 거의 항상 같은 실행 계획이 만들어진다.


